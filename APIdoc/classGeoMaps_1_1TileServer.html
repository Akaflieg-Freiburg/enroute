<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Enroute Flight Navigation: GeoMaps::TileServer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Enroute Flight Navigation
   &#160;<span id="projectnumber">2.15.95</span>
   </div>
   <div id="projectbrief">A navigation app for VFR pilots</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>GeoMaps</b></li><li class="navelem"><a class="el" href="classGeoMaps_1_1TileServer.html">TileServer</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-slots">Public Slots</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classGeoMaps_1_1TileServer-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">GeoMaps::TileServer Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>HTTP server for mapbox' MBTiles files.  
 <a href="classGeoMaps_1_1TileServer.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="TileServer_8h_source.html">TileServer.h</a>&gt;</code></p>

<p>Inherits Server.</p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-slots"></a>
Public Slots</h2></td></tr>
<tr class="memitem:a92cefd77ce1aae4655d0062e5e3d12c9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGeoMaps_1_1TileServer.html#a92cefd77ce1aae4655d0062e5e3d12c9">addMbtilesFileSet</a> (const QVector&lt; QPointer&lt; <a class="el" href="classDataManagement_1_1Downloadable.html">DataManagement::Downloadable</a> &gt;&gt; &amp;baseMapsWithFiles, const QString &amp;baseName)</td></tr>
<tr class="memdesc:a92cefd77ce1aae4655d0062e5e3d12c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a new set of tile files.  <a href="classGeoMaps_1_1TileServer.html#a92cefd77ce1aae4655d0062e5e3d12c9">More...</a><br /></td></tr>
<tr class="separator:a92cefd77ce1aae4655d0062e5e3d12c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fba1abc24f25b7639e9a326cd642eb6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGeoMaps_1_1TileServer.html#a5fba1abc24f25b7639e9a326cd642eb6">removeMbtilesFileSet</a> (const QString &amp;path)</td></tr>
<tr class="memdesc:a5fba1abc24f25b7639e9a326cd642eb6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes a set of tile files.  <a href="classGeoMaps_1_1TileServer.html#a5fba1abc24f25b7639e9a326cd642eb6">More...</a><br /></td></tr>
<tr class="separator:a5fba1abc24f25b7639e9a326cd642eb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a345b81e1577da5b4c2b3ddd32cf5ee19"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGeoMaps_1_1TileServer.html#a345b81e1577da5b4c2b3ddd32cf5ee19">TileServer</a> (QUrl baseUrl=QUrl(), QObject *parent=nullptr)</td></tr>
<tr class="memdesc:a345b81e1577da5b4c2b3ddd32cf5ee19"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new tile server.  <a href="classGeoMaps_1_1TileServer.html#a345b81e1577da5b4c2b3ddd32cf5ee19">More...</a><br /></td></tr>
<tr class="separator:a345b81e1577da5b4c2b3ddd32cf5ee19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d27655d0394e53f2a9d69e49abb40f7"><td class="memItemLeft" align="right" valign="top">QString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGeoMaps_1_1TileServer.html#a1d27655d0394e53f2a9d69e49abb40f7">serverUrl</a> () const</td></tr>
<tr class="memdesc:a1d27655d0394e53f2a9d69e49abb40f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">URL under which this server is presently reachable.  <a href="classGeoMaps_1_1TileServer.html#a1d27655d0394e53f2a9d69e49abb40f7">More...</a><br /></td></tr>
<tr class="separator:a1d27655d0394e53f2a9d69e49abb40f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>HTTP server for mapbox' MBTiles files. </p>
<p>This class features an HTTP server that is able to serve MBTiles, for use in Mapbox-powered geographical map applications. The server is build on nitroshare's excellent qhttpengine code (<a href="https://github.com/nitroshare/qhttpengine">https://github.com/nitroshare/qhttpengine</a>). This class is in factt a thin wrapper around QHttpEngine::Server, with only a few convenience methods added. It inherits thus indirectly from QTcpServer, so that the documentation for this class applies.</p>
<p>This server is able to handle several sets of MBTiles files. Each set is available under a single URL, and the MBTile files in each set are expected to contain identical metadata. To serve a tile request, the server goes through the MBTiles files in random order and serves the first tile it can find. Tiles contained in more than one file need thus to be identical. A typical use case would be a server that contains to sets of files, one set with vector tiles containing openstreetmap data and one set with raster data used for hillshading. Each set contains two MBTiles files, one for Africa and one for Europe. </p>

<p class="definition">Definition at line <a class="el" href="TileServer_8h_source.html#l00073">73</a> of file <a class="el" href="TileServer_8h_source.html">TileServer.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a345b81e1577da5b4c2b3ddd32cf5ee19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a345b81e1577da5b4c2b3ddd32cf5ee19">&#9670;&nbsp;</a></span>TileServer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">GeoMaps::TileServer::TileServer </td>
          <td>(</td>
          <td class="paramtype">QUrl&#160;</td>
          <td class="paramname"><em>baseUrl</em> = <code>QUrl()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QObject *&#160;</td>
          <td class="paramname"><em>parent</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a new tile server. </p>
<p>This constructor sets up a new tile server. The server will serve the static content found in the Qt ressource system under ":/static", as well as sets of tiles added using the method <a class="el" href="classGeoMaps_1_1TileServer.html#a92cefd77ce1aae4655d0062e5e3d12c9" title="Add a new set of tile files.">addMbtilesFileSet()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">baseUrl</td><td>The URL under which the tile will be available. If this URL is empty, then the TileJSON generated by the server will direct clients to retrieve tiles from <a class="el" href="classGeoMaps_1_1TileServer.html#a1d27655d0394e53f2a9d69e49abb40f7" title="URL under which this server is presently reachable.">serverUrl()</a>; this is often a string of the form "http://localhost:8080". This is not the correct behaviour in all settings. For instance, if the server is visible to the outside world through an reverse ssl-proxy under the Url "https://myserver.com" then you should pass that URL here.</td></tr>
    <tr><td class="paramname">parent</td><td>The standard QObject parent </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a92cefd77ce1aae4655d0062e5e3d12c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92cefd77ce1aae4655d0062e5e3d12c9">&#9670;&nbsp;</a></span>addMbtilesFileSet</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void GeoMaps::TileServer::addMbtilesFileSet </td>
          <td>(</td>
          <td class="paramtype">const QVector&lt; QPointer&lt; <a class="el" href="classDataManagement_1_1Downloadable.html">DataManagement::Downloadable</a> &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>baseMapsWithFiles</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>baseName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add a new set of tile files. </p>
<p>This method adds a new set of tile files, that will be available under <a class="el" href="classGeoMaps_1_1TileServer.html#a1d27655d0394e53f2a9d69e49abb40f7" title="URL under which this server is presently reachable.">serverUrl()</a>+"/baseName" (typically, this is a URL of the form '<a href="http://localhost:8080/basename'">http://localhost:8080/basename'</a>).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">baseMapsWithFiles</td><td>The name of one or more mbtile files on the disk, which are expected to conform to the MBTiles Specification 1.3 (<a href="https://github.com/mapbox/mbtiles-spec/blob/master/1.3/spec.md">https://github.com/mapbox/mbtiles-spec/blob/master/1.3/spec.md</a>). These files must exist until the file set is removed or the sever is destructed, or else replies to tile requests will yield undefined results. The tile files are expected to agree in their metadata, and the metadata (attribution, description, format, name, minzoom, maxzoom) is read only from one of the files (a random one, in fact). If a tile is contained in more than one of the files, the data is expected to be identical in each of the files.</td></tr>
    <tr><td class="paramname">baseName</td><td>The path under which the tiles willconst be available. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5fba1abc24f25b7639e9a326cd642eb6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5fba1abc24f25b7639e9a326cd642eb6">&#9670;&nbsp;</a></span>removeMbtilesFileSet</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void GeoMaps::TileServer::removeMbtilesFileSet </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Removes a set of tile files. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>Path of tiles to remove </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1d27655d0394e53f2a9d69e49abb40f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d27655d0394e53f2a9d69e49abb40f7">&#9670;&nbsp;</a></span>serverUrl()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QString GeoMaps::TileServer::serverUrl </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>URL under which this server is presently reachable. </p>
<p>If the server is listening to incoming connections, this is a URL of the form "http://serverAddress:serverPort", typically something like "http://127.0.0.1:3470". If the server is not listening to incoming connections, an empty string is returned.</p>
<dl class="section return"><dt>Returns</dt><dd>URL under which this server is presently reachable </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/home/runner/work/enroute/enroute/src/geomaps/<a class="el" href="TileServer_8h_source.html">TileServer.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
