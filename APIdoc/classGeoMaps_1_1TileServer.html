<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Enroute Flight Navigation: GeoMaps::TileServer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Enroute Flight Navigation
   &#160;<span id="projectnumber">2.26.8</span>
   </div>
   <div id="projectbrief">A navigation app for VFR pilots</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>GeoMaps</b></li><li class="navelem"><a class="el" href="classGeoMaps_1_1TileServer.html">TileServer</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-slots">Public Slots</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classGeoMaps_1_1TileServer-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">GeoMaps::TileServer Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>HTTP server for mapbox' MBTiles files.  
 <a href="classGeoMaps_1_1TileServer.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="TileServer_8h_source.html">TileServer.h</a>&gt;</code></p>

<p>Inherits QAbstractHttpServer.</p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-slots"></a>
Public Slots</h2></td></tr>
<tr class="memitem:a7a54f355fcd49c9e0f51e7602341b48c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGeoMaps_1_1TileServer.html#a7a54f355fcd49c9e0f51e7602341b48c">addMbtilesFileSet</a> (const QString &amp;baseName, const QVector&lt; QPointer&lt; <a class="el" href="classGeoMaps_1_1MBTILES.html">GeoMaps::MBTILES</a> &gt;&gt; &amp;MBTilesFiles)</td></tr>
<tr class="memdesc:a7a54f355fcd49c9e0f51e7602341b48c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a new set of tile files.  <a href="classGeoMaps_1_1TileServer.html#a7a54f355fcd49c9e0f51e7602341b48c">More...</a><br /></td></tr>
<tr class="separator:a7a54f355fcd49c9e0f51e7602341b48c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49ce8f3de7fa3d96e8d7b3f54590f39b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGeoMaps_1_1TileServer.html#a49ce8f3de7fa3d96e8d7b3f54590f39b">removeMbtilesFileSet</a> (const QString &amp;baseName)</td></tr>
<tr class="memdesc:a49ce8f3de7fa3d96e8d7b3f54590f39b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes a set of tile files.  <a href="classGeoMaps_1_1TileServer.html#a49ce8f3de7fa3d96e8d7b3f54590f39b">More...</a><br /></td></tr>
<tr class="separator:a49ce8f3de7fa3d96e8d7b3f54590f39b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a3d555e9c8b5dae1bdbd66be76e4c8942"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGeoMaps_1_1TileServer.html#a3d555e9c8b5dae1bdbd66be76e4c8942">TileServer</a> (QObject *parent=nullptr)</td></tr>
<tr class="memdesc:a3d555e9c8b5dae1bdbd66be76e4c8942"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new tile server.  <a href="classGeoMaps_1_1TileServer.html#a3d555e9c8b5dae1bdbd66be76e4c8942">More...</a><br /></td></tr>
<tr class="separator:a3d555e9c8b5dae1bdbd66be76e4c8942"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8c68f6593380c168b067a666451fae7"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classGeoMaps_1_1TileServer.html#aa8c68f6593380c168b067a666451fae7">serverUrl</a> () -&gt; QString</td></tr>
<tr class="memdesc:aa8c68f6593380c168b067a666451fae7"><td class="mdescLeft">&#160;</td><td class="mdescRight">URL under which this server is presently reachable.  <a href="classGeoMaps_1_1TileServer.html#aa8c68f6593380c168b067a666451fae7">More...</a><br /></td></tr>
<tr class="separator:aa8c68f6593380c168b067a666451fae7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>HTTP server for mapbox' MBTiles files. </p>
<p>This class features a simple HTTP server that serve the following files to <a href="http://127.0.0.1:xxxx/path">http://127.0.0.1:xxxx/path</a>.</p>
<ul>
<li>If path is a file name, the server checks if the file is available in the resource system of the app and serves that file.</li>
<li>If path equals "aviationData.geojson", the server returns a <a class="el" href="classGeoMaps_1_1GeoJSON.html" title="GeoJSON file support class.">GeoJSON</a> document that contains the full aviation data, as provided by <a class="el" href="classGlobalObject.html#ab12da0d2ab30cc15a28dfa9e78ab578d" title="Pointer to appplication-wide static GeoMaps::GeoMapProvider instance.">GlobalObject::geoMapProvider()</a>-&gt;geoJSON().</li>
<li>If path equals the base name of an MBTilesFileSet, then the server returns a JSON document describing the MBTiles.</li>
<li>If path equals "baseName/z/x/y.XXX", then the server returns an individual tile from the tile set.</li>
</ul>
<p>This server is able to handle several sets of MBTiles files. Each set is available under a single URL, and the MBTile files in each set are expected to contain identical metadata. To serve a tile request, the server goes through the MBTiles files in random order and serves the first tile it can find. Tiles contained in more than one file need thus to be identical. A typical use case would be a server that contains to sets of files, one set with vector tiles containing openstreetmap data and one set with raster data used for hillshading. Each set contains two MBTiles files, one for Africa and one for Europe. </p>

<p class="definition">Definition at line <a class="el" href="TileServer_8h_source.html#l00058">58</a> of file <a class="el" href="TileServer_8h_source.html">TileServer.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a3d555e9c8b5dae1bdbd66be76e4c8942"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d555e9c8b5dae1bdbd66be76e4c8942">&#9670;&nbsp;</a></span>TileServer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">GeoMaps::TileServer::TileServer </td>
          <td>(</td>
          <td class="paramtype">QObject *&#160;</td>
          <td class="paramname"><em>parent</em> = <code>nullptr</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a new tile server. </p>
<p>The tile server will find a free port and listen to 127.0.0.1:port. The method <a class="el" href="classGeoMaps_1_1TileServer.html#aa8c68f6593380c168b067a666451fae7" title="URL under which this server is presently reachable.">serverUrl()</a> returns the precise Url where the server will be available.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">parent</td><td>The standard QObject parent </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a7a54f355fcd49c9e0f51e7602341b48c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a54f355fcd49c9e0f51e7602341b48c">&#9670;&nbsp;</a></span>addMbtilesFileSet</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void GeoMaps::TileServer::addMbtilesFileSet </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>baseName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QVector&lt; QPointer&lt; <a class="el" href="classGeoMaps_1_1MBTILES.html">GeoMaps::MBTILES</a> &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>MBTilesFiles</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add a new set of tile files. </p>
<p>This method adds a new set of tile files, that will be available under <a class="el" href="classGeoMaps_1_1TileServer.html#aa8c68f6593380c168b067a666451fae7" title="URL under which this server is presently reachable.">serverUrl()</a>+"/baseName" (typically, this is a URL of the form '<a href="http://localhost:8080/basename'">http://localhost:8080/basename'</a>).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">baseName</td><td>The path under which the tiles will be available.</td></tr>
    <tr><td class="paramname">MBTilesFiles</td><td>The name of one or more mbtile files on the disk, which are expected to conform to the MBTiles Specification 1.3 (<a href="https://github.com/mapbox/mbtiles-spec/blob/master/1.3/spec.md">https://github.com/mapbox/mbtiles-spec/blob/master/1.3/spec.md</a>). These files must exist until the file set is removed or the sever is destructed, or else replies to tile requests will yield undefined results. The tile files are expected to agree in their metadata, and the metadata (attribution, description, format, name, minzoom, maxzoom) is read only from one of the files (a random one, in fact). If a tile is contained in more than one of the files, the data is expected to be identical in each of the files. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a49ce8f3de7fa3d96e8d7b3f54590f39b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49ce8f3de7fa3d96e8d7b3f54590f39b">&#9670;&nbsp;</a></span>removeMbtilesFileSet</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void GeoMaps::TileServer::removeMbtilesFileSet </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>baseName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Removes a set of tile files. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">baseName</td><td>Path of tiles to remove </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa8c68f6593380c168b067a666451fae7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8c68f6593380c168b067a666451fae7">&#9670;&nbsp;</a></span>serverUrl()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">auto GeoMaps::TileServer::serverUrl </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> -&gt;  QString</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>URL under which this server is presently reachable. </p>
<p>The method returns the Url where the server is listening to incoming connections. This is typically string of the form "http://127.0.0.1:3470". If the server is not listening to incoming connections, an empty string is returned.</p>
<dl class="section return"><dt>Returns</dt><dd>URL under which this server is presently reachable </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/home/runner/work/enroute/enroute/src/geomaps/<a class="el" href="TileServer_8h_source.html">TileServer.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
