\doxysection{Geo\+Maps\+::Tile\+Server Class Reference}
\hypertarget{classGeoMaps_1_1TileServer}{}\label{classGeoMaps_1_1TileServer}\index{GeoMaps::TileServer@{GeoMaps::TileServer}}


HTTP server for mapbox\textquotesingle{} MBTiles files.  




{\ttfamily \#include $<$Tile\+Server.\+h$>$}



Inherits QAbstract\+Http\+Server.

\doxysubsubsection*{Public Slots}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{classGeoMaps_1_1TileServer_aaaaf41e2f487f2216c833f8f21245514}{add\+Mbtiles\+File\+Set}} (const QString \&base\+Name, const QVector$<$ QShared\+Pointer$<$ \mbox{\hyperlink{classFileFormats_1_1MBTILES}{File\+Formats\+::\+MBTILES}} $>$ $>$ \&MBTiles\+Files)
\begin{DoxyCompactList}\small\item\em Add a new set of tile files. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classGeoMaps_1_1TileServer_a49ce8f3de7fa3d96e8d7b3f54590f39b}{remove\+Mbtiles\+File\+Set}} (const QString \&base\+Name)
\begin{DoxyCompactList}\small\item\em Removes a set of tile files. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Signals}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{classGeoMaps_1_1TileServer_a4823efcd59f3ab3b4227b678455f26ea}\label{classGeoMaps_1_1TileServer_a4823efcd59f3ab3b4227b678455f26ea} 
void {\bfseries server\+Url\+Changed} ()
\begin{DoxyCompactList}\small\item\em Notification signal for the property with the same name. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classGeoMaps_1_1TileServer_a3d555e9c8b5dae1bdbd66be76e4c8942}{Tile\+Server}} (QObject \texorpdfstring{$\ast$}{*}parent=nullptr)
\begin{DoxyCompactList}\small\item\em Create a new tile server. \end{DoxyCompactList}\item 
QString \mbox{\hyperlink{classGeoMaps_1_1TileServer_af68911936effdef411efcae70109b24c}{server\+Url}} ()
\begin{DoxyCompactList}\small\item\em Getter function for the property with the same name. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Properties}
\begin{DoxyCompactItemize}
\item 
QString \mbox{\hyperlink{classGeoMaps_1_1TileServer_a874565006efe32728090fe0ff8ac2b47}{server\+Url}}
\begin{DoxyCompactList}\small\item\em URL under which this server is presently reachable. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
HTTP server for mapbox\textquotesingle{} MBTiles files. 

This class features a simple HTTP server that serve the following files to \href{http://127.0.0.1:xxxx/path}{\texttt{ http\+://127.\+0.\+0.\+1\+:xxxx/path}}.


\begin{DoxyItemize}
\item If path is a file name, the server checks if the file is available in the resource system of the app and serves that file.
\item If path equals "{}aviation\+Data.\+geojson"{}, the server returns a \doxylink{classGeoMaps_1_1GeoJSON}{Geo\+JSON} document that contains the full aviation data, as provided by \doxylink{classGlobalObject_a241d8d74ad20f5b5fdfa3eff30a20077}{Global\+Object\+::geo\+Map\+Provider()}-\/\texorpdfstring{$>$}{>}geo\+JSON().
\item If path equals the base name of an MBTiles\+File\+Set, then the server returns a JSON document describing the MBTiles.
\item If path equals "{}base\+Name/z/x/y.\+XXX"{}, then the server returns an individual tile from the tile set.
\end{DoxyItemize}

This server is able to handle several sets of MBTiles files. Each set is available under a single URL, and the MBTile files in each set are expected to contain identical metadata. To serve a tile request, the server goes through the MBTiles files in random order and serves the first tile it can find. Tiles contained in more than one file need thus to be identical. A typical use case would be a server that contains to sets of files, one set with vector tiles containing openstreetmap data and one set with raster data used for hillshading. Each set contains two MBTiles files, one for Africa and one for Europe. 

Definition at line \mbox{\hyperlink{TileServer_8h_source_l00058}{58}} of file \mbox{\hyperlink{TileServer_8h_source}{Tile\+Server.\+h}}.



\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classGeoMaps_1_1TileServer_a3d555e9c8b5dae1bdbd66be76e4c8942}\index{GeoMaps::TileServer@{GeoMaps::TileServer}!TileServer@{TileServer}}
\index{TileServer@{TileServer}!GeoMaps::TileServer@{GeoMaps::TileServer}}
\doxysubsubsection{\texorpdfstring{TileServer()}{TileServer()}}
{\footnotesize\ttfamily \label{classGeoMaps_1_1TileServer_a3d555e9c8b5dae1bdbd66be76e4c8942} 
Geo\+Maps\+::\+Tile\+Server\+::\+Tile\+Server (\begin{DoxyParamCaption}\item[{QObject \texorpdfstring{$\ast$}{*}}]{parent}{ = {\ttfamily nullptr}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [explicit]}}



Create a new tile server. 

The tile server will find a free port and listen to 127.\+0.\+0.\+1\+:port. The method \doxylink{classGeoMaps_1_1TileServer_a874565006efe32728090fe0ff8ac2b47}{server\+Url()} returns the precise Url where the server will be available.


\begin{DoxyParams}{Parameters}
{\em parent} & The standard QObject parent \\
\hline
\end{DoxyParams}


\doxysubsection{Member Function Documentation}
\Hypertarget{classGeoMaps_1_1TileServer_aaaaf41e2f487f2216c833f8f21245514}\index{GeoMaps::TileServer@{GeoMaps::TileServer}!addMbtilesFileSet@{addMbtilesFileSet}}
\index{addMbtilesFileSet@{addMbtilesFileSet}!GeoMaps::TileServer@{GeoMaps::TileServer}}
\doxysubsubsection{\texorpdfstring{addMbtilesFileSet}{addMbtilesFileSet}}
{\footnotesize\ttfamily \label{classGeoMaps_1_1TileServer_aaaaf41e2f487f2216c833f8f21245514} 
void Geo\+Maps\+::\+Tile\+Server\+::add\+Mbtiles\+File\+Set (\begin{DoxyParamCaption}\item[{const QString \&}]{base\+Name}{, }\item[{const QVector$<$ QShared\+Pointer$<$ \mbox{\hyperlink{classFileFormats_1_1MBTILES}{File\+Formats\+::\+MBTILES}} $>$ $>$ \&}]{MBTiles\+Files}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}



Add a new set of tile files. 

This method adds a new set of tile files, that will be available under \doxylink{classGeoMaps_1_1TileServer_a874565006efe32728090fe0ff8ac2b47}{server\+Url()}+"{}/base\+Name"{} (typically, this is a URL of the form \textquotesingle{}\href{http://localhost:8080/basename'}{\texttt{ http\+://localhost\+:8080/basename\textquotesingle{}}}).


\begin{DoxyParams}{Parameters}
{\em base\+Name} & The path under which the tiles will be available.\\
\hline
{\em MBTiles\+Files} & The name of one or more mbtile files on the disk, which are expected to conform to the MBTiles Specification 1.\+3 (\href{https://github.com/mapbox/mbtiles-spec/blob/master/1.3/spec.md}{\texttt{ https\+://github.\+com/mapbox/mbtiles-\/spec/blob/master/1.\+3/spec.\+md}}). These files must exist until the file set is removed or the sever is destructed, or else replies to tile requests will yield undefined results. The tile files are expected to agree in their metadata, and the metadata (attribution, description, format, name, minzoom, maxzoom) is read only from one of the files (a random one, in fact). If a tile is contained in more than one of the files, the data is expected to be identical in each of the files. \\
\hline
\end{DoxyParams}
\Hypertarget{classGeoMaps_1_1TileServer_a49ce8f3de7fa3d96e8d7b3f54590f39b}\index{GeoMaps::TileServer@{GeoMaps::TileServer}!removeMbtilesFileSet@{removeMbtilesFileSet}}
\index{removeMbtilesFileSet@{removeMbtilesFileSet}!GeoMaps::TileServer@{GeoMaps::TileServer}}
\doxysubsubsection{\texorpdfstring{removeMbtilesFileSet}{removeMbtilesFileSet}}
{\footnotesize\ttfamily \label{classGeoMaps_1_1TileServer_a49ce8f3de7fa3d96e8d7b3f54590f39b} 
void Geo\+Maps\+::\+Tile\+Server\+::remove\+Mbtiles\+File\+Set (\begin{DoxyParamCaption}\item[{const QString \&}]{base\+Name}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [slot]}}



Removes a set of tile files. 


\begin{DoxyParams}{Parameters}
{\em base\+Name} & Path of tiles to remove \\
\hline
\end{DoxyParams}
\Hypertarget{classGeoMaps_1_1TileServer_af68911936effdef411efcae70109b24c}\index{GeoMaps::TileServer@{GeoMaps::TileServer}!serverUrl@{serverUrl}}
\index{serverUrl@{serverUrl}!GeoMaps::TileServer@{GeoMaps::TileServer}}
\doxysubsubsection{\texorpdfstring{serverUrl()}{serverUrl()}}
{\footnotesize\ttfamily \label{classGeoMaps_1_1TileServer_af68911936effdef411efcae70109b24c} 
QString Geo\+Maps\+::\+Tile\+Server\+::server\+Url (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [nodiscard]}}



Getter function for the property with the same name. 

\begin{DoxyReturn}{Returns}
Property server\+Url 
\end{DoxyReturn}


\doxysubsection{Property Documentation}
\Hypertarget{classGeoMaps_1_1TileServer_a874565006efe32728090fe0ff8ac2b47}\index{GeoMaps::TileServer@{GeoMaps::TileServer}!serverUrl@{serverUrl}}
\index{serverUrl@{serverUrl}!GeoMaps::TileServer@{GeoMaps::TileServer}}
\doxysubsubsection{\texorpdfstring{serverUrl}{serverUrl}}
{\footnotesize\ttfamily \label{classGeoMaps_1_1TileServer_a874565006efe32728090fe0ff8ac2b47} 
QString Geo\+Maps\+::\+Tile\+Server\+::server\+Url\hspace{0.3cm}{\ttfamily [read]}}



URL under which this server is presently reachable. 

The property holds returns the Url where the server is listening to incoming connections. This is typically string of the form "{}http\+://127.\+0.\+0.\+1\+:3470"{}. If the server is not listening to incoming connections, the string is empty. 

Definition at line \mbox{\hyperlink{TileServer_8h_source_l00088}{88}} of file \mbox{\hyperlink{TileServer_8h_source}{Tile\+Server.\+h}}.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
/home/runner/work/enroute/enroute/src/geomaps/Tile\+Server.\+h\end{DoxyCompactItemize}
