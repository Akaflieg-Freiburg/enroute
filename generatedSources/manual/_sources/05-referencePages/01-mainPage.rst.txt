.. _mainPage:

Main Page and Moving Map
========================

The main page is the page that you will use the most often. This is also the
page that opens when you start the app. The following image shows the Main Page
in a typical flight situation.

.. _movingMapFlt:
.. figure:: ../02-tutorialBasic/autogenerated/02-02-04-EnRoute.png
   :scale: 30 %
   :align: center
   :alt: Flight route window, route set

   The Main Page of **Enroute Flight Navigation**

- At the top of the screen, you see the `Route Information Bar`_ with
  information about the remaining flight route. 
- The page body shows a moving map with your current position and a number of
  interactive controls. 
- At the bottom, the `Navigation Bar`_ displays information about the current
  flight situation.

This manual uses the words "Bearing Mode" and "Autopan Mode" to describe two
settings that govern the behavior of the map display.

Bearing Mode
  The moving map can operate in two "bearing modes". In the mode "north up", the
  map is rotated so that the north direction is up, as you would expect from a
  paper map.  In the mode "track up", the map is rotated according to your
  direction of movement, so that your flight direction is up.
  
Autopan Mode
  If the autopan mode is on, the map is automatically moved, so that the
  position you aircraft is near the center of the map display. If the autopan
  mode is off, the map is not moved and the position of your aircraft might not
  be visible on the map.


Route Information Bar
---------------------

If you have defined a flight route following the steps outlined in the section
:ref:`planAFlight`, then the top of the Main Page will show a tabular panel with
one or two lines of information about the remaining route that you still have to
fly. The first line of the table refers to the next waypoint, the second line to
the final waypoint in your route.

====== ==============
Code   Meaning
====== ==============
---    Name of the waypoint.
TC     True course to the waypoint (only shown for course to next waypoint).
DIST   Distance to the waypoint.
ETE    Estimated Time Enroute to the waypoint.
ETA    Estimated Arrival Time at the waypoint, in UTC.
====== ==============

- The units for the distance are chosen according to the settings on the
  Aircraft Page.
- If the information cannot be computed (e.g. because the positions is unknown,
  or because you are flying too far away from the route), the panel shows a
  brief error message. 
- Close to the final destination, the panel shows the words "Near destination."


Navigation Bar
--------------

The bottom of the display shows a little panel with the following information.

====== ==============
Code   Meaning
====== ==============
T.ALT  True altitude (=geometric altitude).
FL     Flight level.
GS     Ground speed.
TT     True track.
UTC    Current time.
====== ==============

- Depending on the settings made in the :ref:`Settings Page`, the field T.ALT
  shows the altitude above sea level or the altitude above ground. This is
  indicated with the standard abbreviation "AMSL" or "AGL".
- The units for the altitude display are chosen according to the settings on the
  Aircraft Page.
- The flight level is only available if your device is connected to a traffic
  receiver (such as a PowerFLARM device) that reports the pressure altitude.
- The units for the ground speed display are chosen according to the settings on
  the Aircraft Page.
- Flight level and current time are hidden if the display is not wide enough.

.. warning:: Vertical airspace boundaries are defined by pressure altitudes
   (with respect to QNH or standard pressure).  Depending on temperature and air
   density, the pressure altitude will differ from the true altitude that is
   shown by the app.  **Never use true altitude to judge vertical distances to
   airspaces.**


Interactive Controls
--------------------

The page body shows the following interactive control buttons that can be used
together with the standard gestures to operate the app.

========================================================== ========
Symbol                                                     Function
========================================================== ========
.. image:: ../01-gettingStarted/ic_menu.png                Open the main menu.
.. image:: ../01-gettingStarted/NorthArrow.png             Switch between modes **north up** and **track up**.
.. image:: ../01-gettingStarted/ic_layers.png              Open the raster map menu. Only visible when raster maps are installed.
.. image:: ../01-gettingStarted/ic_my_location.png         Set autopan mode to "on".
.. image:: ../01-gettingStarted/ic_add.png                 Zoom in.
.. image:: ../01-gettingStarted/ic_remove.png              Zoom out.
.. image:: ../01-gettingStarted/ic_airplanemode_active.png Open the traffic receiver status page. Only visible when the app is not connected to a traffic data receiver. 
========================================================== ========


Main Menu
^^^^^^^^^

Use this menu to access all other pages, access settings and exit the app.


Raster Map Menu
^^^^^^^^^^^^^^^

This menu is visible when raster maps are installed. It shows all raster maps
installed, and allows choosing one of them for display.  See the section
:ref:`importRaster` for more details.


Moving Map
----------

The moving map shows a physical map with shaded terrain relief, overlaid with
aviation data.  At low zoom values, the map looks similar to the standard
1:50.000 ICAO maps. At higher zoom values, the map will also show traffic
circuits and control zone procedures, as you would expect from an approach
chart.

.. note:: Traffic circuits and control zone procedures are available for 
   select countries only.  See the section :ref:`aeroMapData` for more details.

The moving map shows the following additional items

- If you have set an :ref:`SettingsAALimit` on the :ref:`SettingsPage`, the map
  will show a little reminder at the top of the screen, with a text such as
  "Airspaces up to 9500 ft".
- To give you a rough estimate for the horizontal distances, the map features a
  scale. Depending on screen orientation, the scale is shown at the bottom or at
  the left of the screen.
- At the very bottom of the screen, there is a copyright notice. Click on the
  notice to open a dialogue window with more detailed information.


Gesture Controls
^^^^^^^^^^^^^^^^

The moving map can be controlled by standard gestures.

- **Mouse Wheel:** On desktop computers, the mouse wheel zooms in and out.
- **Pinch Gesture:** On touch-screen devices, the pinch gesture zooms in and
  out.
- **Pan Gesture:** On touch-screen devices, the pinch the pan gesture moves the
  map and sets the autopan mode to "off".
- **Tap-and-hold Gesture:** Tap-and-hold anywhere in the map to open the
  waypoint description dialogue. This is the quickest way to obtain information
  about airfields, navaids, reporting points, terrain elevation and airspace.
  The figure :ref:`wpInfo2` shows how this will typically look.
- **Double Tap Gesture:** The double tap gesture is equivalent to tap-and-hold.

.. _wpInfo2:
.. figure:: ../01-gettingStarted/autogenerated/01-03-03-EDFEinfo.png
   :scale: 30 %
   :align: center
   :alt: Information about EDFE Airport

   Information about EDFE Airport


.. _movingMapOwnshipPosition:

Ownship Position
^^^^^^^^^^^^^^^^

The ownship position is shown prominently in the moving map, using one of the
following symbols.

================================= ========
Symbol                            Function
================================= ========
.. image:: self-noPosition.png    SatNav is not working. The symbol shows the last known position.
.. image:: self-noDirection.png   SatNav is working, and the aircraft is not moving. The symbol shows the current position.
.. image:: self-withDirection.png SatNav is working, and the aircraft is moving. The symbol shows the current position. The arrow shows the direction of movement.
================================= ========

As soon as you are flying, the app shows the projected flight path for the next
five minutes. The flight path vector is sized so that each of the black and
white segments corresponds to one minute.

.. _flightVector2:
.. figure:: ../01-gettingStarted/flightVector.png
   :scale: 30 %
   :align: center
   :alt: Projected Flight Path for the Next Five Minutes

   Projected Flight Path for the Next Five Minutes


Traffic Information
^^^^^^^^^^^^^^^^^^^

**Enroute Flight Navigation** can connect to your aircraft's traffic receiver
(typically a FLARM device) and display nearby traffic on the moving map.  The
section :ref:`traffic` explains how to establish the connection. The figure
:ref:`EDTFtraffic2` shows a typical situation.

.. _EDTFtraffic2:
.. figure:: ../02-tutorialBasic/autogenerated/02-01-01-traffic.png
   :scale: 30 %
   :align: center
   :alt: Approaching EDTF with traffic

   Approaching EDTF with traffic

To show only relevant traffic, **Enroute Flight Navigation** will display
traffic factors only if the vertical distance is less than 1,500 m and the
horizontal distance less than 20 nm.

.. warning:: **Enroute Flight Navigation** shows traffic on the moving map, but
    does not issue traffic warnings.  The app contains no collision avoidance
    algorithms.


Color Coding
~~~~~~~~~~~~

**Enroute Flight Navigation** uses colors to indicate the potential danger of
the traffic.  This works best when the app is connected to a FLARM device. In
this setting, the colors have the following precise meaning.

====== ========
Color  Meaning
====== ========
Green  No alarm.
Yellow Alarm level 1. Collision predicted in 13-18 seconds.
Red    Alarm level 2 or higher. Collision predicted in less than 13 seconds.
====== ========


Traffic Factors
~~~~~~~~~~~~~~~

The moving map display two kinds of traffic.

- Traffic whose precise position is unknown to the traffic receiver; this is
  often the case with traffic that has only a Mode-S transponder. This kind of
  traffic is indicated in the moving map by a transparent circle around the
  ownship position. The traffic is likely to be found inside that circle.
- Traffic whose position is precisely known. This traffic is typically equipped
  with a FLARM or ADS-B transmitter.  The symbols used to display this traffic
  in the moving map are explained below. If the traffic is known to be moving,
  its projected flight path is indicated with a black-and-white flight vector,
  similar to the symbol shown in the Figure :ref:`flightVector2` for the ownship
  flight vector.  

=========================================== ========
Symbol                                      Function
=========================================== ========
.. image:: traffic-noDirection-green.png    The traffic is not moving, or its movement is unknown. No alarm.
.. image:: traffic-noDirection-yellow.png   The traffic is not moving, or its movement is unknown. Alarm level 1. Collision predicted in 13-18 seconds.
.. image:: traffic-noDirection-red.png      The traffic is not moving, or its movement is unknown. Alarm level 2 or higher. Collision predicted in less than 13 seconds.
.. image:: traffic-withDirection-green.png  The traffic is moving, the arrow shows the direction of movement. No alarm.
.. image:: traffic-withDirection-yellow.png The traffic is moving, the arrow shows the direction of movement. Alarm level 1. Collision predicted in 13-18 seconds.
.. image:: traffic-withDirection-red.png    The traffic is moving, the arrow shows the direction of movement. Alarm level 2 or higher. Collision predicted in less than 13 seconds.
=========================================== ========


Traffic labelling
~~~~~~~~~~~~~~~~~

The traffic is labelled with the following pieces of information about the
traffic, to the extent known.

- Traffic type. This is one of "Aircraft", "Airship", "Balloon", "Copter",
  "Drone", "Glider", "Hang Glider", "Jet", "Paraglider", "Skydiver", "Static
  Obstacle" and "Tow Plane".
- The traffic callsign.
- The relative vertical distance, in the units for the distance chosen in the
  settings on the Aircraft Page.  A positive value indicates that the traffic is
  above you.
- An arrow symbols pointing upwards, downwards or sideways indicates the
  vertical speed of the traffic.

.. note:: Traffic callsigns are shown only if the "FLARM Database" has been 
    installed in the page "Map and Data Library".


Flight Route
^^^^^^^^^^^^

If you have defined a flight route following the steps outlined in the section
:ref:`planAFlight`, the route will be highlighted in magenta line. The direct
path to the next waypoint is highlighted in dark red.  The image
:ref:`movingMapFlt` shows how this will look.


Waypoints and NOTAMs
^^^^^^^^^^^^^^^^^^^^

The moving map show waypoints using the following standard ICAO symbols. In
addition, it highlights locations with active or future NOTAMs.

=========================================== ========
Symbol                                      Function
=========================================== ========
.. image:: NOTAM.png                        Locations with active or future NOTAMs
.. image:: AD-GLD.png                       Glider flying site
.. image:: AD-GRASS.png                     Aerodrome with grass runway
.. image:: AD-INOP.png                      Closed aerodrome 
.. image:: AD-MIL-GRASS.png                 Military aerodrome with grass runway
.. image:: AD-MIL-PAVED.png                 Military aerodrome with paved runway
.. image:: AD-MIL.png                       Military aerodrome
.. image:: AD-PAVED.png                     Aerodrome with paved runway
.. image:: AD.png                           Aerodrome
.. image:: AD-UL.png                        Microlight flying site
.. image:: AD-WATER.png                     Hydroport
.. image:: DVOR-DME.png                     Doppler-VOR with DME
.. image:: DVOR.png                         Doppler-VOR
.. image:: DVORTAC.png                      Doppler-VORTAC
.. image:: MRP.png                          Mandatory reporting point
.. image:: NDB.png                          NDB
.. image:: RP.png                           Reporting point
.. image:: VOR-DME.png                      VOR with DME
.. image:: VOR.png                          VOR
.. image:: VORTAC.png                       VORTAC
.. image:: WP.png                           Generic waypoint (from flight route or waypoint library)
=========================================== ========

.. note:: **Enroute Flight Navigation** only displays NOTAMs located near your 
  present position, along your flight route, and near locations for which 
  the waypoint dialog has been opened.


Procedures and Traffic Circuits
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Traffic circuits for motorized aircraft are shown as blue lines. Traffic circuits
for gliders or Ultralight aircraft are shown as red lines. Entry and exit routes
to traffic pattern are indicated by open ends of the pattern. The traffic
circuit will show the traffic circuit altitude when the information is
available.

Entry routes into control zones, transversal routes as well as holding patterns
are shown as solid blue lines. Exit routes are shown as dashed blue lines.


.. _sideView:

Airspace Side View
------------------

Starting with version 3.0.0, **Enroute Flight Navigation** is able to show a
side view of the airspace and the terrain.  To open the side view, swipe upwards
from the Navigation Bar at the bottom of the page.


Dependence on Static Pressure Information
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

The side view is only available if **Enroute Flight Navigation** has access to
static pressure information.  If static pressure information is not available,
**Enroute Flight Navigation** will show a prominent warning.


Why does **Enroute Flight Navigation** need static pressure for the airspace side view?

  Vertical airspace boundaries are defined as barometric altitudes, either over
  QNH or over the standard pressure level.  As a consequence, the geometric
  altitude of airspaces changes with the weather: Airspaces are typically much
  lower on cold winter days than they are in summer. In order to show your
  aircraft in relation to airspaces, **Enroute Flight Navigation** therefore
  needs to know the barometric altitudes of your aircraft, or equivalently, the
  static pressure.  


How can I provide static pressure data?

  Follow the steps outlined in chapter :ref:`traffic` to connect **Enroute
  Flight Navigation** to a traffic data receiver that provides static pressure
  data. Since ADS-B data uses barometric altitudes, any traffic data receiver
  that receives ADS-B will most likely be suitable. In particular, all
  PowerFLARM devices provide the necessary data.
  
  If your mobile device is equipped with a high-precision pressure sensor
  **and** if you fly an aircraft where static pressure and cabin pressure agree,
  you use the option "Use cabin pressure..." on the page :ref:`aircraftPage` to
  enable the use of cabin pressure data.  However, please read the warnings and
  notes on the page :ref:`aircraftPage` carefully before you enable this option.


But other apps show side views without static pressure data!

  We do not know the internal workings of other apps.  However, we do not see
  how sufficiently reliable information can possibly be provided without static
  pressure data. 

  We fly general aviation aircraft in Germany and Switzerland, where vertical
  separation between jet aircraft and airspace limits is sometimes no more than
  500ft.  In view of the extremely severe consequences of airspace violations,
  we decided against showing questionable data.


Scale
^^^^^

To provide the most relevant data at a glance, **Enroute Flight Navigation**
uses different map scales for horizontal and vertical directions. In most
scenarios, vertical distances are greatly exaggerated.

- In horizontal direction, the scale of the Side View follows the scale used in
  the moving map. 

- In vertical direction, **Enroute Flight Navigation** chooses a scale to
  guarantee that the current position, the flight path for the next 7.5 minutes
  and a height hand of 6,000ft are visible.


Side View Features
^^^^^^^^^^^^^^^^^^

The side view shows the ownship position and the flight path vector using the
same symbols as in the moving map; we refer the reader to the Section
:ref:`movingMapOwnshipPosition` for a detailed description. If the aircraft is
not moving at sufficiently high speed for a flight path vector to show, the
direction corresponding to "right" is shown in a text field at the top of the
view.


Airspaces
^^^^^^^^^

For clarity, the side view does not show all the airspaces that you can see in
the moving map. The following airspaces are shown.

- Airspaces of class "A", "B", "C" and "D": Outlined with a solid blue line,
  with light blue border.

- Control Zones: Outlined with a dashed blue line, filled in light red.

- Danger Zones, Restricted and Prohibited Airspaces: Outlined with a dashed red
  line, with light red border.

- Nature Preserve Areas: Outlined with a dashed green line, with light green
  border.

- Radio Mandatory Zones, Traffic Information Areas, Traffic Information Zones,
  Aerodrome Traffic Zone: Outlined with a dashed blue line, filled in light
  blue.

- Parachute Jumping Exercise Areas, Special Use Airspaces: Outlined with a
  dashed red line.
